# {{ ansible_managed }}

[DEFAULT]
# Disable stderr logging
transport_url = {{ rpc_transport_url }}

[placement_database]
connection = mysql+pymysql://{{ placement_database_user }}:{{ placement_database_password }}@{{ database_address }}:{{ database_port }}/{{ placement_database_name }}
min_pool_size = {{ placement_db_min_pool_size }}
max_pool_size = {{ placement_db_max_pool_size }}
pool_timeout = {{ placement_db_pool_timeout }}
max_retries = {{ placement_db_max_retries }}
max_overflow = {{ placement_db_max_overflow }}
db_retry_interval = {{ placement_db_retry_interval }}
db_inc_retry_interval = {{ placement_db_inc_retry_interval }}
db_max_retry_interval = {{ placement_db_max_retry_interval }}
db_max_retries = {{ placement_db_max_retries }}

[api]
auth_strategy = keystone

[keystone_authtoken]
auth_type = {{ placement_keystone_auth_plugin }}
auth_url = {{ keystone_auth_url }}
www_authenticate_uri = {{ keystone_auth_url }}
project_domain_id = {{ placement_service_project_domain_id }}
user_domain_id = {{ placement_service_user_domain_id }}
project_name = {{ placement_service_project_name }}
username = {{ placement_service_user_name }}
password = {{ placement_service_password }}
region_name = {{ keystone_service_region }}

memcache_servers = {% for host in groups['memcached'] %}{{ hostvars[host]['ansible_' + hostvars[host]['api_interface']]['ipv4']['address'] }}:{{ memcached_port }}{% if not loop.last %},{% endif %}{% endfor %}

token_cache_time = 300
